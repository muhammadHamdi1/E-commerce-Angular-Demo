import{a as j,b as V,c as R,d as z}from"./chunk-OPK6XEXH.js";import"./chunk-EPMVEVG5.js";import{a as B}from"./chunk-MW3RMLJA.js";import{a as x}from"./chunk-XNTUXZHW.js";import"./chunk-OGZCDNXD.js";import{a as O}from"./chunk-HTFUH5GH.js";import"./chunk-EYBUI2ZM.js";import{b as T,c as d,e as L,f as N,g as A,h,j as D,k,l as q,o as P}from"./chunk-22KOONE2.js";import"./chunk-FENKNI4Q.js";import{e as M}from"./chunk-SHLRQL3I.js";import{e as I}from"./chunk-V7LYRSRR.js";import{e as G}from"./chunk-57RWOG5Y.js";import{g as w}from"./chunk-BX2N63MZ.js";import"./chunk-7OHDHKLD.js";import{Ab as _,Ib as y,Ob as F,Pb as E,Qa as r,Qb as c,Ra as f,Rb as u,ca as b,fb as g,jb as a,ob as l,sb as m,tb as s,ub as o,zb as C}from"./chunk-GCLD3WRZ.js";var U=()=>({severity:"error",summary:"Error",detail:"`Email is required`"}),v=e=>[e],H=()=>({severity:"error",summary:"Error",detail:"`Email not valid`"}),J=()=>({severity:"error",summary:"Error",detail:"`Password is required`"}),K=()=>({severity:"error",summary:"Error",detail:"`must be at lest 3 char`"}),Q=()=>({severity:"error",summary:"Error",detail:"`Cannot exceed 20 char`"});function W(e,p){e&1&&o(0,"p-messages",10),e&2&&a("value",u(4,v,c(3,U)))("enableService",!1)("closable",!1)}function X(e,p){e&1&&o(0,"p-messages",10),e&2&&a("value",u(4,v,c(3,H)))("enableService",!1)("closable",!1)}function Y(e,p){if(e&1&&g(0,W,1,6,"p-messages",10)(1,X,1,6,"p-messages",10),e&2){let i=_();l(0,i.email.getError("required")?0:-1),r(),l(1,i.email.getError("email")?1:-1)}}function Z(e,p){e&1&&o(0,"p-messages",10),e&2&&a("value",u(4,v,c(3,J)))("enableService",!1)("closable",!1)}function $(e,p){e&1&&o(0,"p-messages",11),e&2&&a("value",u(4,v,c(3,K)))("enableService",!1)("closable",!1)}function ee(e,p){e&1&&o(0,"p-messages",12),e&2&&a("value",u(4,v,c(3,Q)))("enableService",!1)("closable",!1)}function ie(e,p){if(e&1&&g(0,Z,1,6,"p-messages",10)(1,$,1,6,"p-messages",11)(2,ee,1,6,"p-messages",12),e&2){let i=_();l(0,i.password.getError("required")?0:-1),r(),l(1,i.password.getError("minlength")?1:-1),r(),l(2,i.password.getError("maxlength")?2:-1)}}var _e=(()=>{class e{constructor(i,t,n,S){this.authService_=i,this._notifecationsService=t,this.router=n,this._userData=S,this.initFormControls(),this.initFormGroup()}initFormControls(){this.email=new h("",[d.required,d.email]),this.password=new h("",[d.required,d.minLength(3),d.maxLength(20)])}initFormGroup(){this.loginForm=new A({email:this.email,password:this.password})}submit(){this.loginForm.valid?this.SiginIn(this.loginForm.value):(this.loginForm.markAllAsTouched(),Object.keys(this.loginForm.controls).forEach(i=>this.loginForm.controls[i].markAsDirty()))}SiginIn(i){this.authService_.login(i).subscribe({next:t=>{t._id&&(this._notifecationsService.showSuccess("Success","Success login"),localStorage.setItem("token",t._id),this._userData.userName.next(t.name),localStorage.setItem("username",t.name)),this.router.navigate(["user"])},error:t=>{this._notifecationsService.showError("Error",t.error.error),console.log(t)}})}static{this.\u0275fac=function(t){return new(t||e)(f(x),f(O),f(w),f(B))}}static{this.\u0275cmp=b({type:e,selectors:[["app-login"]],standalone:!0,features:[F([G]),E],decls:20,vars:5,consts:[[1,"container","my-8"],[1,"my-3","font-bold","capitalize","text-orange-500"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"pi","pi-envelope"],["pInputText","","formControlName","email","placeholder","Email",3,"autofocus"],[1,"validation-msg"],[1,"pi","pi-lock"],["pInputText","","type","password","formControlName","password","placeholder","Password"],["type","submit","label","login",3,"disabled"],[3,"value","enableService","closable"],[1,"mx-0",3,"value","enableService","closable"],["p-message-close","",3,"value","enableService","closable"]],template:function(t,n){t&1&&(m(0,"section")(1,"div",0)(2,"h1",1),y(3,"login"),s(),m(4,"form",2),C("ngSubmit",function(){return n.submit()}),m(5,"div",3)(6,"p-inputGroup")(7,"p-inputGroupAddon"),o(8,"i",4),s(),o(9,"input",5),s(),m(10,"div",6),g(11,Y,2,2),s()(),m(12,"div",3)(13,"p-inputGroup")(14,"p-inputGroupAddon"),o(15,"i",7),s(),o(16,"input",8),s(),m(17,"div",6),g(18,ie,3,3),s()(),o(19,"p-button",9),s()()()),t&2&&(r(4),a("formGroup",n.loginForm),r(5),a("autofocus",!0),r(2),l(11,n.email&&n.email.touched?11:-1),r(7),l(18,n.password&&n.password.touched?18:-1),r(),a("disabled",n.loginForm.invalid))},dependencies:[z,D,T,L,N,k,q,j,V,P,M,R,I],styles:[`.p-element.p-button{display:block;width:100%;background-color:coral;border:2px solid coral!important}
`],encapsulation:2})}}return e})();export{_e as LoginComponent};
