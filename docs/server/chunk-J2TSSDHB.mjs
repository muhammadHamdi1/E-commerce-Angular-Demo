import './polyfills.server.mjs';
import{a as D,b as k,c as L,d as U}from"./chunk-RDEKUPA2.mjs";import{e as M}from"./chunk-P6KO5HCJ.mjs";import"./chunk-275CC2WN.mjs";import"./chunk-F76RLELM.mjs";import"./chunk-ZRCWJDCH.mjs";import"./chunk-XKXUENXH.mjs";import{a as V}from"./chunk-KFJRXRTM.mjs";import{b as T,c as d,e as G,f as N,g as I,h,j as P,k as q,l as A,o as j}from"./chunk-SI2T4P5N.mjs";import{a as z}from"./chunk-6BD4JUNB.mjs";import{a as R}from"./chunk-4NP52KRI.mjs";import"./chunk-ZY6AP4W3.mjs";import"./chunk-V3SRXGYT.mjs";import{e as x}from"./chunk-F5RLKEXU.mjs";import{k as F}from"./chunk-PQS7RTCO.mjs";import"./chunk-G46ZWZ73.mjs";import{Gb as y,Mb as w,Nb as E,Oa as s,Ob as c,Pa as _,Pb as u,_ as S,db as f,hb as l,mb as a,qb as p,rb as r,sb as t,xb as b,yb as v}from"./chunk-4UJYGIJ6.mjs";import"./chunk-VVCT4QZE.mjs";var H=()=>({severity:"error",summary:"Error",detail:"`Name is required`"}),g=e=>[e],B=()=>({severity:"error",summary:"Error",detail:"`must be at lest 3 char`"}),O=()=>({severity:"error",summary:"Error",detail:"`Cannot exceed 20 char`"}),J=()=>({severity:"error",summary:"Error",detail:"`Email is required`"}),K=()=>({severity:"error",summary:"Error",detail:"`Email not valid`"}),Q=()=>({severity:"error",summary:"Error",detail:"`Password is required`"}),W=()=>({severity:"error",summary:"Error",detail:"`RePassword not match password`"});function X(e,m){e&1&&t(0,"p-messages",13),e&2&&l("value",u(4,g,c(3,H)))("enableService",!1)("closable",!1)}function Y(e,m){e&1&&t(0,"p-messages",14),e&2&&l("value",u(4,g,c(3,B)))("enableService",!1)("closable",!1)}function Z(e,m){e&1&&t(0,"p-messages",15),e&2&&l("value",u(4,g,c(3,O)))("enableService",!1)("closable",!1)}function $(e,m){if(e&1&&f(0,X,1,6,"p-messages",13)(1,Y,1,6,"p-messages",14)(2,Z,1,6,"p-messages",15),e&2){let i=v();a(0,i.name.getError("required")?0:-1),s(),a(1,i.name.getError("minlength")?1:-1),s(),a(2,i.name.getError("maxlength")?2:-1)}}function ee(e,m){e&1&&t(0,"p-messages",13),e&2&&l("value",u(4,g,c(3,J)))("enableService",!1)("closable",!1)}function ie(e,m){e&1&&t(0,"p-messages",13),e&2&&l("value",u(4,g,c(3,K)))("enableService",!1)("closable",!1)}function te(e,m){if(e&1&&f(0,ee,1,6,"p-messages",13)(1,ie,1,6,"p-messages",13),e&2){let i=v();a(0,i.email.getError("required")?0:-1),s(),a(1,i.email.getError("email")?1:-1)}}function ne(e,m){e&1&&t(0,"p-messages",13),e&2&&l("value",u(4,g,c(3,Q)))("enableService",!1)("closable",!1)}function oe(e,m){e&1&&t(0,"p-messages",14),e&2&&l("value",u(4,g,c(3,B)))("enableService",!1)("closable",!1)}function re(e,m){e&1&&t(0,"p-messages",15),e&2&&l("value",u(4,g,c(3,O)))("enableService",!1)("closable",!1)}function ae(e,m){if(e&1&&f(0,ne,1,6,"p-messages",13)(1,oe,1,6,"p-messages",14)(2,re,1,6,"p-messages",15),e&2){let i=v();a(0,i.password.getError("required")?0:-1),s(),a(1,i.password.getError("minlength")?1:-1),s(),a(2,i.password.getError("maxlength")?2:-1)}}function se(e,m){e&1&&t(0,"p-messages",13),e&2&&l("value",u(4,g,c(3,W)))("enableService",!1)("closable",!1)}function le(e,m){if(e&1&&f(0,se,1,6,"p-messages",13),e&2){let i=v();a(0,i.rePassword.getError("passNotMatch")?0:-1)}}var Ee=(()=>{class e{constructor(i,n,o,C){this.authService_=i,this.router=n,this._userData=o,this._notifecationsService=C,this.isRegisterd=!1,this.initFormControls(),this.initFormGroup()}initFormControls(){this.name=new h("",[d.required,d.minLength(3),d.maxLength(20)]),this.email=new h("",[d.required,d.email]),this.password=new h("",[d.required,d.minLength(3),d.maxLength(20)]),this.rePassword=new h("",[d.required,this.passwordMatch(this.password)])}initFormGroup(){this.registrationForm=new I({name:this.name,email:this.email,password:this.password,rePassword:this.rePassword})}passwordMatch(i){return n=>i.value!==n.value||n.value===""?{passNotMatch:!0}:null}submit(){this.registrationForm.valid?(this.SiginUp(this.registrationForm.value),this.isRegisterd=!0):(this.registrationForm.markAllAsTouched(),Object.keys(this.registrationForm.controls).forEach(i=>this.registrationForm.controls[i].markAsDirty()))}SiginUp(i){this.authService_.register(i).subscribe({next:n=>{if(n._id){this._notifecationsService.showSuccess("Success","Success register");let{email:o,password:C}=i;this.authService_.login({email:o,password:C}).subscribe(me=>{localStorage.setItem("token",n._id),this.router.navigate(["user"]),this._userData.userName.next(n.name),localStorage.setItem("username",n.name)})}},error:n=>{this._notifecationsService.showError("Error",n.error.error),console.log(n)}})}static{this.\u0275fac=function(n){return new(n||e)(_(R),_(F),_(V),_(z))}}static{this.\u0275cmp=S({type:e,selectors:[["app-register"]],standalone:!0,features:[w([x]),E],decls:34,vars:7,consts:[[1,"container","my-8"],[1,"my-3","font-bold","capitalize","text-orange-500"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"pi","pi-user"],["pInputText","","formControlName","name","placeholder","UserName",3,"autofocus"],[1,"validation-msg"],[1,"pi","pi-envelope"],["pInputText","","formControlName","email","placeholder","Email"],[1,"pi","pi-lock"],["pInputText","","type","password","formControlName","password","placeholder","Password"],["pInputText","","type","password","formControlName","rePassword","placeholder","RePassword"],["type","submit","label","Submit",3,"disabled"],[3,"value","enableService","closable"],[1,"mx-0",3,"value","enableService","closable"],["p-message-close","",3,"value","enableService","closable"]],template:function(n,o){n&1&&(p(0,"section")(1,"div",0)(2,"h1",1),y(3,"register form"),r(),p(4,"form",2),b("ngSubmit",function(){return o.submit()}),p(5,"div",3)(6,"p-inputGroup")(7,"p-inputGroupAddon"),t(8,"i",4),r(),t(9,"input",5),r(),p(10,"div",6),f(11,$,3,3),r()(),p(12,"div",3)(13,"p-inputGroup")(14,"p-inputGroupAddon"),t(15,"i",7),r(),t(16,"input",8),r(),p(17,"div",6),f(18,te,2,2),r()(),p(19,"div",3)(20,"p-inputGroup")(21,"p-inputGroupAddon"),t(22,"i",9),r(),t(23,"input",10),r(),p(24,"div",6),f(25,ae,3,3),r()(),p(26,"div",3)(27,"p-inputGroup")(28,"p-inputGroupAddon"),t(29,"i",9),r(),t(30,"input",11),r(),p(31,"div",6),f(32,le,1,1),r()(),t(33,"p-button",12),r()()()),n&2&&(s(4),l("formGroup",o.registrationForm),s(5),l("autofocus",!0),s(2),a(11,o.name&&o.name.touched?11:-1),s(7),a(18,o.email&&o.email.touched?18:-1),s(7),a(25,o.password&&o.password.touched?25:-1),s(7),a(32,o.rePassword&&o.rePassword.touched?32:-1),s(),l("disabled",o.registrationForm.invalid))},dependencies:[U,P,T,G,N,q,A,D,k,j,M,L],styles:[`.p-element.p-button{display:block;width:100%;background-color:coral;border:none!important}
`],encapsulation:2})}}return e})();export{Ee as RegisterComponent};
